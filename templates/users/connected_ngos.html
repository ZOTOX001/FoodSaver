{% extends 'base.html' %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8">
    <div class="mb-8">
        <h1 class="text-3xl font-black text-[#0d1b0d] dark:text-white mb-2">Connected NGOs & Communities</h1>
        <p class="text-slate-500">These organizations have successfully received food donations from you.</p>
    </div>

    <!-- Stats or Summary -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        <div class="bg-[#e7f3e7] dark:bg-[#1a2e1a] p-6 rounded-xl border border-primary/20">
            <h3 class="text-primary font-bold text-sm uppercase mb-1">Total Connected</h3>
            <p class="text-3xl font-black">{{ngos.count}}</p>
        </div>
    </div>

    {% if ngos %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for ngo in ngos %}
        <div
            class="bg-white dark:bg-[#152915] rounded-xl border border-[#cfe7cf] dark:border-[#2a3d2a] p-6 hover:shadow-lg transition-shadow">
            <div class="flex items-start gap-4 mb-4">
                <div
                    class="size-12 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold text-xl">
                    {% with initial=ngo.username|slice:":1"|upper %}
                    {{initial}}
                    {% endwith %}
                </div>
                <div>
                    {% with name=ngo.institution_name|default:ngo.username %}
                    <h3 class="font-bold text-lg leading-tight">{{name}}</h3>
                    {% endwith %}
                    <p class="text-xs text-slate-500 mb-1">
                        {% if ngo.is_verified %}
                        <span class="text-green-600 flex items-center gap-0.5"><span
                                class="material-symbols-outlined text-sm">verified</span> Verified NGO</span>
                        {% else %}
                        Unverified Community
                        {% endif %}
                    </p>
                    <p class="text-xs text-slate-400 truncate max-w-[200px]">
                        {% with addr=ngo.address|default:"Location not specified" %}
                        {{addr}}
                        {% endwith %}
                    </p>
                </div>
            </div>

            <div
                class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 mb-4 bg-slate-50 dark:bg-black/20 p-3 rounded-lg">
                <span class="material-symbols-outlined text-green-600">volunteer_activism</span>
                <span>Reg No: <span class="font-mono font-bold">{{ngo.ngo_registration|default:"N/A"}}</span></span>
            </div>

            <a href="{% url 'profile_view' ngo.id %}"
                class="block w-full text-center py-2.5 rounded-lg border border-[#cfe7cf] dark:border-[#2a3d2a] font-bold text-sm hover:bg-[#e7f3e7] dark:hover:bg-primary/10 transition-colors">
                View Impact Profile
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div
        class="text-center py-20 bg-slate-50 dark:bg-white/5 rounded-xl border-dashed border-2 border-slate-200 dark:border-white/10">
        <div
            class="size-16 bg-slate-100 dark:bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400">
            <span class="material-symbols-outlined text-3xl">handshake</span>
        </div>
        <h3 class="text-lg font-bold text-slate-700 dark:text-slate-300">No Connections Yet</h3>
        <p class="text-slate-500 max-w-sm mx-auto mt-2">Once you complete a donation with an NGO, they will appear here.
        </p>
    </div>
    {% endif %}
</div>
{% endblock %}